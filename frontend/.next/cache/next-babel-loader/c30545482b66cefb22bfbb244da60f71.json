{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/jongraybill/Desktop/programming/seo-blog/frontend/components/auth/ProfileUpdate.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Link from 'next/link';\nimport { useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport { getCookie, isAuth, updateUser } from '../../actions/auth';\nimport { getProfile, update } from '../../actions/user';\nimport { API } from '../../config';\n\nvar ProfileUpdate = function ProfileUpdate() {\n  _s();\n\n  var _useState = useState({\n    username: '',\n    username_for_photo: '',\n    name: '',\n    email: '',\n    about: '',\n    password: '',\n    error: false,\n    success: false,\n    loading: false,\n    photo: '',\n    userData: true && new FormData()\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var token = getCookie('token');\n  var username = values.username,\n      username_for_photo = values.username_for_photo,\n      name = values.name,\n      email = values.email,\n      about = values.about,\n      password = values.password,\n      error = values.error,\n      success = values.success,\n      loading = values.loading,\n      photo = values.photo,\n      userData = values.userData;\n\n  var init = function init() {\n    getProfile(token).then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error\n        }));\n      } else {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          username: data.username,\n          username_for_photo: data.username,\n          name: data.name,\n          email: data.email,\n          about: data.about\n        }));\n      }\n    });\n  };\n\n  useEffect(function () {\n    init();\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      userData: new FormData()\n    }));\n  }, []);\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      var value = name === 'photo' ? e.target.files[0] : e.target.value;\n      userData.set(name, value);\n      setValues(_objectSpread(_objectSpread({}, values), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, name, value), _defineProperty(_objectSpread2, \"userData\", userData), _defineProperty(_objectSpread2, \"error\", false), _defineProperty(_objectSpread2, \"success\", false), _objectSpread2)));\n    };\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true\n    }));\n    update(token, userData).then(function (data) {\n      if (data.error) {\n        console.log('data.error', data.error);\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error,\n          loading: false\n        }));\n      } else {\n        updateUser(data, function () {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            username: data.username,\n            name: data.name,\n            email: data.email,\n            about: data.about,\n            password: '',\n            success: true,\n            loading: false\n          }));\n        });\n      }\n    });\n  };\n\n  var profileUpdateForm = function profileUpdateForm() {\n    return __jsx(\"form\", {\n      onSubmit: handleSubmit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 5\n      }\n    }, __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }\n    }, __jsx(\"label\", {\n      className: \"btn btn-outline-info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, \"Profile photo\", __jsx(\"input\", {\n      onChange: handleChange('photo'),\n      type: \"file\",\n      accept: \"image/*\",\n      hidden: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }))), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }\n    }, __jsx(\"label\", {\n      className: \"text-muted\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    }, \"Username\"), __jsx(\"input\", {\n      onChange: handleChange('username'),\n      type: \"text\",\n      value: username,\n      className: \"form-control\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }\n    }, __jsx(\"label\", {\n      className: \"text-muted\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, \"Name\"), __jsx(\"input\", {\n      onChange: handleChange('name'),\n      type: \"text\",\n      value: name,\n      className: \"form-control\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, __jsx(\"label\", {\n      className: \"text-muted\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }, \"About\"), __jsx(\"textarea\", {\n      onChange: handleChange('about'),\n      type: \"text\",\n      value: about,\n      className: \"form-control\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, __jsx(\"label\", {\n      className: \"text-muted\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }, \"Password\"), __jsx(\"input\", {\n      onChange: handleChange('password'),\n      type: \"password\",\n      value: password,\n      className: \"form-control\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    })), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }, showSuccess(), showError(), showLoading()), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }\n    }, __jsx(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      disabled: !username || !name || !email,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }, \"Update\")));\n  };\n\n  var showError = function showError() {\n    return __jsx(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? '' : 'none'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 5\n      }\n    }, error);\n  };\n\n  var showSuccess = function showSuccess() {\n    return __jsx(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: success ? '' : 'none'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 5\n      }\n    }, \"Profile Updated\");\n  };\n\n  var showLoading = function showLoading() {\n    return __jsx(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: loading ? '' : 'none'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 5\n      }\n    }, \"Loading...\");\n  };\n\n  return __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, __jsx(\"img\", {\n    src: \"\".concat(API, \"/user/photo/\").concat(username),\n    className: \"img img-fluid img-thumbnail mb-3\",\n    style: {\n      maxHeight: 'auto',\n      maxWidth: '100%'\n    },\n    alt: \"user profile\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  })))));\n};\n\n_s(ProfileUpdate, \"urd9IkqsiR20DP3zRzUyQoTN5EE=\");\n\n_c = ProfileUpdate;\nexport default ProfileUpdate;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileUpdate\");","map":{"version":3,"sources":["/Users/jongraybill/Desktop/programming/seo-blog/frontend/components/auth/ProfileUpdate.js"],"names":["Link","useState","useEffect","Router","getCookie","isAuth","updateUser","getProfile","update","API","ProfileUpdate","username","username_for_photo","name","email","about","password","error","success","loading","photo","userData","FormData","values","setValues","token","init","then","data","handleChange","e","value","target","files","set","handleSubmit","preventDefault","console","log","profileUpdateForm","showSuccess","showError","showLoading","display","maxHeight","maxWidth"],"mappings":"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","sourcesContent":["import Link from 'next/link';\nimport { useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport { getCookie, isAuth, updateUser } from '../../actions/auth';\nimport { getProfile, update } from '../../actions/user';\nimport { API } from '../../config';\n\nconst ProfileUpdate = () => {\n  const [values, setValues] = useState({\n    username: '',\n    username_for_photo: '',\n    name: '',\n    email: '',\n    about: '',\n    password: '',\n    error: false,\n    success: false,\n    loading: false,\n    photo: '',\n    userData: process.browser && new FormData()\n  });\n\n  const token = getCookie('token');\n  const {\n    username,\n    username_for_photo,\n    name,\n    email,\n    about,\n    password,\n    error,\n    success,\n    loading,\n    photo,\n    userData\n  } = values;\n\n  const init = () => {\n    getProfile(token).then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setValues({\n          ...values,\n          username: data.username,\n          username_for_photo: data.username,\n          name: data.name,\n          email: data.email,\n          about: data.about\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    init();\n    setValues({ ...values, userData: new FormData() });\n  }, []);\n\n  const handleChange = name => e => {\n    const value = name === 'photo' ? e.target.files[0] : e.target.value;\n    userData.set(name, value);\n    setValues({ ...values, [name]: value, userData, error: false, success: false });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    setValues({ ...values, loading: true });\n    update(token, userData).then(data => {\n      if (data.error) {\n        console.log('data.error', data.error);\n        setValues({ ...values, error: data.error, loading: false });\n      } else {\n        updateUser(data, () => {\n          setValues({\n            ...values,\n            username: data.username,\n            name: data.name,\n            email: data.email,\n            about: data.about,\n            password: '',\n            success: true,\n            loading: false\n          });\n        });\n      }\n    });\n  };\n\n  const profileUpdateForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <label className=\"btn btn-outline-info\">\n          Profile photo\n          <input onChange={handleChange('photo')} type=\"file\" accept=\"image/*\" hidden />\n        </label>\n      </div>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Username</label>\n        <input onChange={handleChange('username')} type=\"text\" value={username} className=\"form-control\" />\n      </div>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Name</label>\n        <input onChange={handleChange('name')} type=\"text\" value={name} className=\"form-control\" />\n      </div>\n      {/*<div className=\"form-group\">\n                <label className=\"text-muted\">Email</label>\n                <input onChange={handleChange('email')} type=\"text\" value={email} className=\"form-control\" />\n            </div>*/}\n      <div className=\"form-group\">\n        <label className=\"text-muted\">About</label>\n        <textarea onChange={handleChange('about')} type=\"text\" value={about} className=\"form-control\" />\n      </div>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Password</label>\n        <input onChange={handleChange('password')} type=\"password\" value={password} className=\"form-control\" />\n      </div>\n      <div>\n        {showSuccess()}\n        {showError()}\n        {showLoading()}\n      </div>\n      <div>\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={!username || !name || !email}>\n          Update\n                </button>\n      </div>\n    </form>\n  );\n  \n  const showError = () => (\n    <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}}>\n      {error}\n    </div>\n  );\n\n  const showSuccess = () => (\n    <div className=\"alert alert-danger\" style={{display: success ? '' : 'none'}}>\n      Profile Updated\n    </div>\n  );\n\n  const showLoading = () => (\n    <div className=\"alert alert-danger\" style={{display: loading ? '' : 'none'}}>\n      Loading...\n    </div>\n  );\n\n    return (\n        <React.Fragment>\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-md-4\">\n                        <img\n                            src={`${API}/user/photo/${username}`}\n                            className=\"img img-fluid img-thumbnail mb-3\"\n                            style={{ maxHeight: 'auto', maxWidth: '100%' }}\n                            alt=\"user profile\"\n                        />\n                    </div>\n\n                </div>\n            </div>\n        </React.Fragment>\n    );\n};\n\nexport default ProfileUpdate;"]},"metadata":{},"sourceType":"module"}